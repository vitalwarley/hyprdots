# /what-did-i-do - Cross-Project Activity Aggregator

Generate/update META-SESSIONS.md with aggregated diary entries from specified period.

## Usage

```
/what-did-i-do <period> [options]
```

## Periods

- `today` - Today's diary entries
- `yesterday` - Previous day's entries
- `this week` - Last 7 days
- `last week` - Previous 7-day period
- `this month` - Current month to date
- `last month` - Previous month
- `from YYYY-MM-DD to YYYY-MM-DD` - Custom date range

## Options

- `for project <name>` - Filter to specific project
- `summary only` - Generate summary section only (weekly/monthly)

## Examples

```bash
/what-did-i-do today
/what-did-i-do this week
/what-did-i-do last month for project noux
/what-did-i-do from 2026-01-01 to 2026-01-31 summary only
```

## Workflow

You will execute the following steps:

### 1. Parse Command Arguments
- Extract period specification (today, this week, etc.)
- Extract optional filters (project name)
- Determine date range based on period

### 2. Read Diary Entries
- Scan `~/.claude/memory/diary/` for files matching date range
- Parse each diary entry to extract:
  - Date and session number
  - Project context (from file paths, git repos, working directory mentioned)
  - Task summary section
  - Key accomplishments
  - Technologies/tools used

### 3. Group and Organize
- Group entries by date (descending order)
- Within each date, group by project
- Extract session summaries and key work items
- Identify cross-project reflections (from `~/.claude/memory/reflections/`)

### 4. Generate/Update META-SESSIONS.md

**File location**: `/home/warley/life/META-SESSIONS.md`

**For daily updates** (`today`, `yesterday`):
- Add new date section at the top (reverse chronological)
- List active projects with session counts
- Summarize work done per project per session
- Link to reflection files if any generated that day

**For period summaries** (`this week`, `last month`):
- Append summary section after the daily entries
- Include statistics: total sessions, projects active, PRs merged, issues created
- Highlight key achievements and patterns
- List top active projects

### 5. Format Output

Use this structure:

```markdown
## YYYY-MM-DD (Day of Week)

**Projects active**: project1 (N sessions), project2 (M sessions)

### project1
- **Session N**: Brief summary of work done
- **Session N+1**: Brief summary of work done

### project2
- **Session M**: Brief summary of work done

### Cross-Project Reflection
- **File**: ~/.claude/memory/reflections/YYYY-MM-reflection-N.md
- **Entries analyzed**: X
- **Rules added**: Y new rules to global CLAUDE.md
- **Key patterns**: List of identified patterns

---

## Weekly Summary: YYYY-MM-DD to YYYY-MM-DD

**Total sessions**: X across Y projects
**PRs merged**: N
**Issues created**: M
**Reflections**: Z cross-project syntheses

**Top project**: name (X sessions) - brief description
**Key achievement**: highlight of the week

---
```

### 6. Maintain File Hygiene
- Keep reverse chronological order (newest first)
- Add "Last updated" timestamp at top of file
- Ensure proper markdown formatting
- Preserve existing content when adding new entries

### 7. Report Statistics
After updating META-SESSIONS.md, report to user:
- Number of diary entries processed
- Date range covered
- Projects identified
- Sessions counted
- Key highlights (brief, 2-3 bullet points)

## Project Context Extraction

Identify project context from diary entries by looking for:
- Git repository paths (e.g., `/home/warley/life/1-projects/noux/`)
- Project names mentioned in task summaries
- File paths modified (extract project from path)
- Working directory mentioned in session

Map to PARA project structure:
- `1-projects/noux/` → "noux"
- `1-projects/research/metabolomics/` → "metabolomics"
- `1-projects/work/toledo/repos/toledo-ia/` → "toledo-ia"

## Integration with PARA

This skill complements the PARA system by:
- Providing cross-project visibility (see all work across 1-projects/)
- Serving as daily standup report generator
- Creating queryable history of activity patterns
- Feeding into monthly review workflow (see `life/.claude/CLAUDE.md`)

## Meta-Memory Layer

The life repository maintains multiple memory artifacts:

- **Project SESSIONS.md**: Per-project session index (generated by `/diary`)
- **META-SESSIONS.md**: Cross-project aggregation (generated by THIS skill)
- **Reflections**: Pattern synthesis (generated by `/reflect`)
- **CLAUDE.md updates**: Rule extraction (generated by `/reflect`)

This skill bridges diary entries (granular, per-session) and META-SESSIONS.md (aggregated, cross-project).

## Usage in Maintenance Rhythms

- **Daily**: Run `/what-did-i-do today` at end of workday
- **Weekly**: Run `/what-did-i-do this week` during weekly review
- **Monthly**: Run `/what-did-i-do last month` during monthly synthesis

After running, commit to life repo:
```bash
git add META-SESSIONS.md
git commit -m "chore(meta): daily activity log YYYY-MM-DD"
```

## Notes

- META-SESSIONS.md should NEVER be manually edited - always use this skill
- If no diary entries found for period, inform user (don't create empty entries)
- For very large date ranges, consider summary-only mode to avoid overwhelming output
- Cross-reference with project-level SESSIONS.md files when available
